{"version":3,"file":"Transactions-a07ad722.js","sources":["../../src/components/TransactionList.jsx","../../src/pages/Transactions.jsx"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function TransactionList({ items, onDelete, isReadOnly }) {\r\n  return (\r\n    <div className=\"transaction-list\" style={{ maxHeight: '500px', overflowY: 'auto' }}>\r\n      {items.map((t, index) => (\r\n        <div key={t.id || index} style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          padding: '8px',\r\n          borderBottom: '1px solid #eee'\r\n        }}>\r\n          <div>\r\n            <div><strong>{t.type}</strong> ${t.amount}</div>\r\n            <div style={{fontSize: 12}}>\r\n              {t.category?.name || 'Uncategorized'} â€” {new Date(t.date).toLocaleDateString()}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              disabled={isReadOnly}\r\n              onClick={() => onDelete(t.id)}\r\n              style={{\r\n                padding: '4px 8px',\r\n                backgroundColor: isReadOnly ? '#ccc' : '#ff4444',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: isReadOnly ? 'not-allowed' : 'pointer'\r\n              }}\r\n            >\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useCallback } from 'react';\nimport api from '../services/api';\nimport TransactionList from '../components/TransactionList';\nimport { AuthContext } from '../contexts/AuthContext';\n\nexport default function Transactions() {\n  const [data, setData] = useState({ items: [], total: 0 });\n  const [page, setPage] = useState(1);\n  const [limit] = useState(50);\n  const { isReadOnly } = React.useContext(AuthContext);\n\n  const fetchPage = useCallback(async (p=1) => {\n    const res = await api.get('/transactions', { params: { page: p, limit }});\n    setData(res.data);\n    setPage(p);\n  }, [limit]);\n\n  useEffect(() => { fetchPage(1).catch(console.error) }, [fetchPage]);\n\n  const handleDelete = async (id) => {\n    if (isReadOnly) return alert('Read-only user cannot delete');\n    await api.delete(`/transactions/${id}`);\n    fetchPage(page).catch(console.error);\n  };\n\n  return (\n    <div style={{padding:20}}>\n      <h2>Transactions</h2>\n      <div style={{marginBottom:10}}>\n        <button onClick={() => fetchPage(page)}>Refresh</button>\n      </div>\n      <TransactionList items={data.items} onDelete={handleDelete} isReadOnly={isReadOnly}/>\n      <div style={{marginTop:10}}>\n        <button disabled={page<=1} onClick={() => fetchPage(page-1)}>Prev</button>\n        <span> Page {page} </span>\n        <button disabled={data.items.length < limit} onClick={() => fetchPage(page+1)}>Next</button>\n      </div>\n    </div>\n  );\n}\n"],"names":["TransactionList","items","onDelete","isReadOnly","t","index","jsxs","jsx","_a","Transactions","data","setData","useState","page","setPage","limit","React","AuthContext","fetchPage","useCallback","p","res","api","useEffect","handleDelete","id"],"mappings":"oEAEA,SAAwBA,EAAgB,CAAE,MAAAC,EAAO,SAAAC,EAAU,WAAAC,GAAc,CACvE,aACG,MAAI,CAAA,UAAU,mBAAmB,MAAO,CAAE,UAAW,QAAS,UAAW,MAAO,EAC9E,WAAM,IAAI,CAACC,EAAGC,WACbC,OAAAA,EAAA,KAAC,OAAwB,MAAO,CAC9B,QAAS,OACT,eAAgB,gBAChB,QAAS,MACT,aAAc,gBAEd,EAAA,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAAAA,OAAC,MAAI,CAAA,SAAA,CAACC,EAAAA,IAAA,SAAA,CAAQ,WAAE,IAAK,CAAA,EAAS,KAAGH,EAAE,MAAA,EAAO,SACzC,MAAI,CAAA,MAAO,CAAC,SAAU,EACpB,EAAA,SAAA,GAAAI,EAAAJ,EAAE,WAAF,YAAAI,EAAY,OAAQ,gBAAgB,MAAI,IAAI,KAAKJ,EAAE,IAAI,EAAE,mBAAmB,CAAA,EAC/E,CAAA,EACF,QACC,MACC,CAAA,SAAAG,EAAA,IAAC,SAAA,CACC,SAAUJ,EACV,QAAS,IAAMD,EAASE,EAAE,EAAE,EAC5B,MAAO,CACL,QAAS,UACT,gBAAiBD,EAAa,OAAS,UACvC,MAAO,QACP,OAAQ,OACR,aAAc,MACd,OAAQA,EAAa,cAAgB,SACvC,EACD,SAAA,QAAA,CAAA,EAGH,CAAA,CAAA,EA3BQC,EAAE,IAAMC,CA4BlB,EACD,CACH,CAAA,CAEJ,CCjCA,SAAwBI,GAAe,CAC/B,KAAA,CAACC,EAAMC,CAAO,EAAIC,EAAA,SAAS,CAAE,MAAO,GAAI,MAAO,CAAA,CAAG,EAClD,CAACC,EAAMC,CAAO,EAAIF,WAAS,CAAC,EAC5B,CAACG,CAAK,EAAIH,EAAA,SAAS,EAAE,EACrB,CAAE,WAAAT,CAAe,EAAAa,EAAM,WAAWC,CAAW,EAE7CC,EAAYC,EAAAA,YAAY,MAAOC,EAAE,IAAM,CAC3C,MAAMC,EAAM,MAAMC,EAAI,IAAI,gBAAiB,CAAE,OAAQ,CAAE,KAAMF,EAAG,MAAAL,CAAM,CAAE,CAAA,EACxEJ,EAAQU,EAAI,IAAI,EAChBP,EAAQM,CAAC,CAAA,EACR,CAACL,CAAK,CAAC,EAEVQ,EAAAA,UAAU,IAAM,CAAEL,EAAU,CAAC,EAAE,MAAM,QAAQ,KAAK,CAAA,EAAK,CAACA,CAAS,CAAC,EAE5D,MAAAM,EAAe,MAAOC,GAAO,CAC7B,GAAAtB,EAAY,OAAO,MAAM,8BAA8B,EAC3D,MAAMmB,EAAI,OAAO,iBAAiBG,CAAE,EAAE,EACtCP,EAAUL,CAAI,EAAE,MAAM,QAAQ,KAAK,CAAA,EAGrC,cACG,MAAI,CAAA,MAAO,CAAC,QAAQ,EACnB,EAAA,SAAA,CAAAN,EAAAA,IAAC,MAAG,SAAY,cAAA,CAAA,EACfA,EAAA,IAAA,MAAA,CAAI,MAAO,CAAC,aAAa,EAAE,EAC1B,SAACA,EAAA,IAAA,SAAA,CAAO,QAAS,IAAMW,EAAUL,CAAI,EAAG,kBAAO,CAAA,EACjD,QACCb,EAAgB,CAAA,MAAOU,EAAK,MAAO,SAAUc,EAAc,WAAArB,EAAuB,SAClF,MAAI,CAAA,MAAO,CAAC,UAAU,EACrB,EAAA,SAAA,CAACI,EAAAA,IAAA,SAAA,CAAO,SAAUM,GAAM,EAAG,QAAS,IAAMK,EAAUL,EAAK,CAAC,EAAG,SAAI,MAAA,CAAA,SAChE,OAAK,CAAA,SAAA,CAAA,SAAOA,EAAK,GAAA,EAAC,EAClBN,EAAA,IAAA,SAAA,CAAO,SAAUG,EAAK,MAAM,OAASK,EAAO,QAAS,IAAMG,EAAUL,EAAK,CAAC,EAAG,SAAI,OAAA,CAAA,EACrF,CACF,CAAA,CAAA,CAEJ"}
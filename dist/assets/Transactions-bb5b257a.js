import{j as e,r as o,R as u,A as p,b as d}from"./index-72eb5a6f.js";function j({items:r,onDelete:l,isReadOnly:t}){return e.jsx("div",{className:"transaction-list",style:{maxHeight:"500px",overflowY:"auto"},children:r.map((s,a)=>{var i;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",borderBottom:"1px solid #eee"},children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:s.type})," $",s.amount]}),e.jsxs("div",{style:{fontSize:12},children:[((i=s.category)==null?void 0:i.name)||"Uncategorized"," â€” ",new Date(s.date).toLocaleDateString()]})]}),e.jsx("div",{children:e.jsx("button",{disabled:t,onClick:()=>l(s.id),style:{padding:"4px 8px",backgroundColor:t?"#ccc":"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:t?"not-allowed":"pointer"},children:"Delete"})})]},s.id||a)})})}function m(){const[r,l]=o.useState({items:[],total:0}),[t,s]=o.useState(1),[a]=o.useState(50),{isReadOnly:i}=u.useContext(p),n=o.useCallback(async(c=1)=>{const h=await d.get("/transactions",{params:{page:c,limit:a}});l(h.data),s(c)},[a]);o.useEffect(()=>{n(1).catch(console.error)},[n]);const x=async c=>{if(i)return alert("Read-only user cannot delete");await d.delete(`/transactions/${c}`),n(t).catch(console.error)};return e.jsxs("div",{style:{padding:20},children:[e.jsx("h2",{children:"Transactions"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx("button",{onClick:()=>n(t),children:"Refresh"})}),e.jsx(j,{items:r.items,onDelete:x,isReadOnly:i}),e.jsxs("div",{style:{marginTop:10},children:[e.jsx("button",{disabled:t<=1,onClick:()=>n(t-1),children:"Prev"}),e.jsxs("span",{children:[" Page ",t," "]}),e.jsx("button",{disabled:r.items.length<a,onClick:()=>n(t+1),children:"Next"})]})]})}export{m as default};
//# sourceMappingURL=Transactions-bb5b257a.js.map
